<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¨Ø§Ú¯ Ø¨Ø§Ù†ØªÛŒ - Encoder & JWT Debugger</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            border-bottom: 3px solid #3498db;
            color: #3498db;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .tool-section {
            margin-bottom: 30px;
        }

        .tool-section h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1.3em;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #3498db;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .result-area {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .jwt-parts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .jwt-parts {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: center;
            }
        }

        .copy-btn {
            background: #9b59b6;
            color: white;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #8e44ad;
        }

        .alert {
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¨Ø§Ú¯ Ø¨Ø§Ù†ØªÛŒ</h1>
            <p>Encoder/Decoder & JWT Debugger - Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ú©Ø±Ù‡Ø§ÛŒ Ø§Ø®Ù„Ø§Ù‚ÛŒ</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('encoder')">Encoder/Decoder</button>
            <button class="tab" onclick="switchTab('jwt')">JWT Debugger</button>
        </div>

        <!-- Encoder/Decoder Tab -->
        <div id="encoder" class="tab-content active">
            <div class="tool-section">
                <h3>ğŸ”¤ Ù…ØªÙ† ÙˆØ±ÙˆØ¯ÛŒ</h3>
                <textarea id="inputText" placeholder="Ù…ØªÙ† Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." rows="4"></textarea>
                
                <div class="button-group">
                    <button class="btn-primary" onclick="encodeBase64()">Base64 Encode</button>
                    <button class="btn-secondary" onclick="decodeBase64()">Base64 Decode</button>
                    <button class="btn-primary" onclick="encodeURL()">URL Encode</button>
                    <button class="btn-secondary" onclick="decodeURL()">URL Decode</button>
                    <button class="btn-primary" onclick="encodeHTML()">HTML Encode</button>
                    <button class="btn-secondary" onclick="decodeHTML()">HTML Decode</button>
                    <button class="btn-success" onclick="calculateMD5()">MD5 Hash</button>
                    <button class="btn-success" onclick="calculateSHA256()">SHA-256 Hash</button>
                    <button class="btn-secondary" onclick="clearAll()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
                </div>

                <div id="encoderAlert" class="alert"></div>

                <h3>ğŸ“Š Ù†ØªÛŒØ¬Ù‡</h3>
                <div class="result-area" id="encoderResult"></div>
                <button class="copy-btn" onclick="copyResult('encoderResult')">ğŸ“‹ Ú©Ù¾ÛŒ Ù†ØªÛŒØ¬Ù‡</button>
            </div>
        </div>

        <!-- JWT Debugger Tab -->
        <div id="jwt" class="tab-content">
            <div class="tool-section">
                <h3>ğŸ”‘ ØªÙˆÚ©Ù† JWT</h3>
                <input type="text" id="jwtToken" placeholder="ØªÙˆÚ©Ù† JWT Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (eyJhbGc...)" oninput="decodeJWT()">
                
                <div class="button-group">
                    <button class="btn-primary" onclick="decodeJWT()">Decode JWT</button>
                    <button class="btn-secondary" onclick="validateJWT()">Validate JWT</button>
                    <button class="btn-secondary" onclick="clearJWT()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                </div>

                <div id="jwtAlert" class="alert"></div>

                <div class="jwt-parts">
                    <div>
                        <h3>ğŸ“ Header</h3>
                        <div class="result-area" id="jwtHeader">{}</div>
                    </div>
                    <div>
                        <h3>ğŸ“¦ Payload</h3>
                        <div class="result-area" id="jwtPayload">{}</div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>ğŸ” Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙˆÚ©Ù†</h3>
                    <div class="result-area" id="jwtInfo"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching function
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.currentTarget.classList.add('active');
        }

        // Encoder/Decoder Functions
        function showAlert(elementId, message, type) {
            const alert = document.getElementById(elementId);
            alert.textContent = message;
            alert.className = `alert alert-${type}`;
            alert.style.display = 'block';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        function encodeBase64() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ encode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            const encoded = btoa(unescape(encodeURIComponent(input)));
            document.getElementById('encoderResult').textContent = encoded;
        }

        function decodeBase64() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ decode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            try {
                const decoded = decodeURIComponent(escape(atob(input)));
                document.getElementById('encoderResult').textContent = decoded;
            } catch (e) {
                showAlert('encoderAlert', 'Ù…ØªÙ† ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù…Ø¹ØªØ¨Ø± Base64 Ù†ÛŒØ³Øª', 'error');
            }
        }

        function encodeURL() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ encode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            const encoded = encodeURIComponent(input);
            document.getElementById('encoderResult').textContent = encoded;
        }

        function decodeURL() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ decode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            try {
                const decoded = decodeURIComponent(input);
                document.getElementById('encoderResult').textContent = decoded;
            } catch (e) {
                showAlert('encoderAlert', 'Ù…ØªÙ† ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù…Ø¹ØªØ¨Ø± URL encoded Ù†ÛŒØ³Øª', 'error');
            }
        }

        function encodeHTML() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ encode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            const encoded = input
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');
            document.getElementById('encoderResult').textContent = encoded;
        }

        function decodeHTML() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ decode ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            const decoded = input
                .replace(/&amp;/g, '&')
                .replace(/&lt;/g, '<')
                .replace(/&gt;/g, '>')
                .replace(/&quot;/g, '"')
                .replace(/&#39;/g, "'");
            document.getElementById('encoderResult').textContent = decoded;
        }

        async function calculateMD5() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ hash Ú©Ø±Ø¯Ù† ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            // Simple MD5 implementation (for demonstration)
            const hash = await simpleMD5(input);
            document.getElementById('encoderResult').textContent = hash;
        }

        async function calculateSHA256() {
            const input = document.getElementById('inputText').value;
            if (!input) {
                showAlert('encoderAlert', 'Ù„Ø·ÙØ§ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ hash Ú©Ø±Ø¯Ù† ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            // Using Web Crypto API for SHA-256
            const encoder = new TextEncoder();
            const data = encoder.encode(input);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            document.getElementById('encoderResult').textContent = hashHex;
        }

        // Simple MD5 function (not cryptographically secure, for demo purposes)
        async function simpleMD5(input) {
            const encoder = new TextEncoder();
            const data = encoder.encode(input);
            const hashBuffer = await crypto.subtle.digest('MD5', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        function clearAll() {
            document.getElementById('inputText').value = '';
            document.getElementById('encoderResult').textContent = '';
            document.getElementById('encoderAlert').style.display = 'none';
        }

        // JWT Functions
        function decodeJWT() {
            const token = document.getElementById('jwtToken').value.trim();
            if (!token) {
                clearJWT();
                return;
            }

            const parts = token.split('.');
            if (parts.length !== 3) {
                showAlert('jwtAlert', 'ØªÙˆÚ©Ù† JWT Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª (Ø¨Ø§ÛŒØ¯ 3 Ø¨Ø®Ø´ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯)', 'error');
                return;
            }

            try {
                // Decode Header
                const header = JSON.parse(atob(parts[0]));
                document.getElementById('jwtHeader').textContent = JSON.stringify(header, null, 2);
                
                // Decode Payload
                const payload = JSON.parse(atob(parts[1]));
                document.getElementById('jwtPayload').textContent = JSON.stringify(payload, null, 2);
                
                // Show token info
                showJWTInfo(header, payload, parts[2]);
                showAlert('jwtAlert', 'ØªÙˆÚ©Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª decode Ø´Ø¯', 'success');
                
            } catch (e) {
                showAlert('jwtAlert', 'Ø®Ø·Ø§ Ø¯Ø± decode Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù†', 'error');
                console.error('JWT decode error:', e);
            }
        }

        function showJWTInfo(header, payload, signature) {
            let info = '';
            
            // Algorithm
            info += `ğŸ”§ Algorithm: ${header.alg || 'Unknown'}\n\n`;
            
            // Token Type
            info += `ğŸ“ Token Type: ${header.typ || 'JWT'}\n\n`;
            
            // Expiration
            if (payload.exp) {
                const expDate = new Date(payload.exp * 1000);
                const now = new Date();
                const isExpired = expDate < now;
                info += `â° Expiration: ${expDate.toLocaleString('fa-IR')}\n`;
                info += `ğŸ“® Status: ${isExpired ? 'âŒ EXPIRED' : 'âœ… VALID'}\n\n`;
            }
            
            // Issued At
            if (payload.iat) {
                const iatDate = new Date(payload.iat * 1000);
                info += `ğŸ•’ Issued At: ${iatDate.toLocaleString('fa-IR')}\n\n`;
            }
            
            // Issuer
            if (payload.iss) {
                info += `ğŸ¢ Issuer: ${payload.iss}\n\n`;
            }
            
            // Subject
            if (payload.sub) {
                info += `ğŸ‘¤ Subject: ${payload.sub}\n\n`;
            }
            
            // Audience
            if (payload.aud) {
                info += `ğŸ¯ Audience: ${Array.isArray(payload.aud) ? payload.aud.join(', ') : payload.aud}\n\n`;
            }
            
            // Signature info
            info += `ğŸ” Signature: ${signature.length > 50 ? signature.substring(0, 50) + '...' : signature}\n`;
            info += `ğŸ“ Signature Length: ${signature.length} characters`;

            document.getElementById('jwtInfo').textContent = info;
        }

        function validateJWT() {
            const token = document.getElementById('jwtToken').value.trim();
            if (!token) {
                showAlert('jwtAlert', 'Ù„Ø·ÙØ§ ÛŒÚ© ØªÙˆÚ©Ù† JWT ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const parts = token.split('.');
            if (parts.length !== 3) {
                showAlert('jwtAlert', 'ÙØ±Ù…Øª ØªÙˆÚ©Ù† Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª', 'error');
                return;
            }

            try {
                const header = JSON.parse(atob(parts[0]));
                const payload = JSON.parse(atob(parts[1]));
                
                let validationResults = 'âœ… Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆÚ©Ù†:\n\n';
                
                // Check algorithm
                if (!header.alg) {
                    validationResults += 'âŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø§Ù…Ø¶Ø§ Ù…Ø´Ø®Øµ Ù†ÛŒØ³Øª\n';
                } else {
                    validationResults += `âœ… Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…: ${header.alg}\n`;
                }
                
                // Check expiration
                if (payload.exp) {
                    const isExpired = Date.now() >= payload.exp * 1000;
                    if (isExpired) {
                        validationResults += 'âŒ ØªÙˆÚ©Ù† Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª\n';
                    } else {
                        validationResults += 'âœ… ØªÙˆÚ©Ù† Ù…Ù†Ù‚Ø¶ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª\n';
                    }
                }
                
                // Check issued at
                if (payload.iat && payload.iat > Date.now() / 1000) {
                    validationResults += 'âš ï¸ ØªÙˆÚ©Ù† Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ ØµØ§Ø¯Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª\n';
                }
                
                if (!payload.exp && !payload.iat) {
                    validationResults += 'âš ï¸ Ù‡ÛŒÚ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²Ù…Ø§Ù†ÛŒ Ø¯Ø± ØªÙˆÚ©Ù† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯\n';
                }
                
                validationResults += '\nğŸ” ØªÙˆØ¬Ù‡: Ø§ÛŒÙ† Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙÙ‚Ø· Ø³Ø§Ø®ØªØ§Ø± ØªÙˆÚ©Ù† Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒÚ©Ù†Ø¯ Ùˆ Ø§Ù…Ø¶Ø§ Ø±Ø§ verify Ù†Ù…ÛŒÚ©Ù†Ø¯.';

                showAlert('jwtAlert', 'Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
                document.getElementById('jwtInfo').textContent = validationResults;
                
            } catch (e) {
                showAlert('jwtAlert', 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆÚ©Ù†', 'error');
            }
        }

        function clearJWT() {
            document.getElementById('jwtToken').value = '';
            document.getElementById('jwtHeader').textContent = '{}';
            document.getElementById('jwtPayload').textContent = '{}';
            document.getElementById('jwtInfo').textContent = '';
            document.getElementById('jwtAlert').style.display = 'none';
        }

        // Copy result to clipboard
        function copyResult(elementId) {
            const result = document.getElementById(elementId).textContent;
            if (!result) {
                showAlert('encoderAlert', 'Ú†ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'error');
                return;
            }
            
            navigator.clipboard.writeText(result).then(() => {
                showAlert('encoderAlert', 'Ù…ØªÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯!', 'success');
            }).catch(err => {
                showAlert('encoderAlert', 'Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù…ØªÙ†', 'error');
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Add sample JWT for demonstration
            document.getElementById('jwtToken').placeholder += '\nÙ…Ø«Ø§Ù„: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c';
        });
    </script>
</body>
</html>
